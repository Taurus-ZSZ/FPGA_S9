# 我的S9调试笔记

## DDR

S9这个板子有两种DDR,

- 一种是的镁光的D9PTK
- 另一个是 SEC743 K4B2G1646F-BYMA y9e5390jc

### DDR的型号

1. D9PTK 对应的型号是：MT41K128M16JT-125:K
2. K4B2G1646F:
   1. [三星半导体官网](https://semiconductor.samsung.com/cn/search/)
   2. 这是三星的DDR3内存颗粒，容量是2Gb= 128Mb*16bit
   3. 相关的手册已经放在了`.01_Hardware/DDR/K4B2G1646F/`文件夹下。
   4. 在zynq 的ps中选择的型号我使用的是MT41K128M16JT-125



## 关于S9中PL的clk

虽然这个板子PL端有两个外部时钟的引脚，但是由于没有焊接晶振，所以为了给PL端的PFGA提供时钟有两种方法：

- 自己在有Y1或者Y2焊接一个晶振。
- 使用PS端的的PLL产生的使用，连接到PL中。

这两种方法各有利弊，第一种可以不依靠PS直接使用PL的时钟，直接设计开发FPGA的程序。第二种可以利用PS产生给PL的时钟，节省硬件成本。另外，zynq的一个优势就是带一个RAM一般都是arm与fpga的配合开发。

### 焊接晶振



### PL使用PS产生的clk

如果PL端使用PS端的时钟，需要下面几步：

1. 添加一个blockdesign 并正确设置相关的外设配置(将自己需要的功能有关的设置好就可以了)，
2. 设置一下DDR配置，这里主要是配置DDR的型号还有就是数据的位宽。这个S9板子的DDR的数据位宽是32bits,但是向4205的那个板子的DDR的位宽只有16bit;所以需要注意DDR的型号和位宽。
3. 设置`clock Configuration`中的`PL Fabric Clocks`选择给pl端的数量与时钟频率。
4. 配置好后保存将blockdesign与自己的设计添加到一块。
5. 后面我们的FPGA端就可以使用PS输出的时钟给我们的设计使用了。

**注意：**工程设计完成后编译完成生成的bit文件并不能直接运行，这是因为PS端输出的时钟并没有输出，需要我们导出我们的硬件设计文件，创建一个最简单的PS 端的程序，比如打印一个hello word。并把ps端的程序下载到板子上之后PS才可一正常给PL提供时钟。
